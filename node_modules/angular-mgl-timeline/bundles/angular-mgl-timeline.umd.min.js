!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/animations"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-mgl-timeline",["exports","@angular/core","@angular/animations","@angular/common"],t):t((e=e||self)["angular-mgl-timeline"]={},e.ng.core,e.ng.animations,e.ng.common)}(this,(function(e,t,n,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n,i){var o,a=arguments.length,l=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(a<3?o(l):a>3?o(t,n,l):o(t,n))||l);return a>3&&l&&Object.defineProperty(t,n,l),l}var l=function(){function e(){}return e=a([t.Component({selector:"mgl-timeline-entry-header",template:"<ng-content></ng-content>",encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline-entry-header{position:relative;display:block;overflow:hidden;padding:15px;text-align:center}"]})],e)}(),s=function(){function e(e,n,i,o,a){this.animationBuilder=e,this.elementRef=n,this.renderer=i,this.changeDetectorRef=o,this.document=a,this._expanded=!1,this._alternate=!1,this._mobile=!1,this._size=50,this.animationDone=new t.EventEmitter,this.expandAnimationTiming="200ms ease",this.collapseAnimationTiming="100ms ease",this.clazz="primary"}var l,s;return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate},set:function(e){this._alternate=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{get:function(){return this._mobile},set:function(e){this._mobile=e,this.setStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){var t=this._expanded!==e;this._expanded=e,t?this.animate():this.setStyle()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.initialStyle=this.document.defaultView.getComputedStyle(this.elementRef.nativeElement),this.setStyle(),this.changeDetectorRef.detectChanges()},e.prototype.getCollapsedStyle=function(){return{top:"50%",left:this.alternate||this.mobile?"-5px":"calc(100% + 5px)",width:this.size+"px",height:this.size+"px",opacity:1,transform:"translateY(-50%) translateX(-50%)",boxShadow:this.initialStyle&&this.initialStyle.boxShadow,borderRadius:"100px"}},e.prototype.getTransitionStyle=function(){return o(o({},this.getCollapsedStyle()),{left:"50%",opacity:.5,boxShadow:"none"})},e.prototype.getExpandedStyle=function(){return o(o({},this.getTransitionStyle()),{left:"0",transform:"translateX(0) translateY(-50%)",width:"100%",height:"100%",opacity:1,borderRadius:0})},e.prototype.animate=function(){var e=this;this.destroyAnimation(),this.expanded?(this.animation=this.animationBuilder.build([n.style(this.getCollapsedStyle()),n.animate(this.expandAnimationTiming,n.style(this.getTransitionStyle())),n.animate(this.expandAnimationTiming,n.style(this.getExpandedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone((function(){return e.animationDone.emit({toState:"expanded"})})),this.animation.play()):(this.animationBuilder,this.animation=this.animationBuilder.build([n.style(this.getExpandedStyle()),n.animate(this.collapseAnimationTiming,n.style(this.getTransitionStyle())),n.animate(this.collapseAnimationTiming,n.style(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone((function(){return e.animationDone.emit({toState:"collapsed"})})),this.animation.play())},e.prototype.setStyle=function(){var e=this;this.destroyAnimation();var t=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(t).forEach((function(n){e.renderer.setStyle(e.elementRef.nativeElement,n,t[n])}))},e.prototype.destroyAnimation=function(){this.animation&&(this.animation.destroy(),delete this.animation)},e.ctorParameters=function(){return[{type:n.AnimationBuilder},{type:t.ElementRef},{type:t.Renderer2},{type:t.ChangeDetectorRef},{type:void 0,decorators:[{type:t.Inject,args:[i.DOCUMENT]}]}]},a([t.Input()],e.prototype,"expandAnimationTiming",void 0),a([t.Input()],e.prototype,"collapseAnimationTiming",void 0),a([t.Input("class"),t.HostBinding("class")],e.prototype,"clazz",void 0),a([t.Input()],e.prototype,"size",null),e=a([t.Component({selector:"mgl-timeline-entry-dot",template:"<ng-content></ng-content>\n",encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline-entry-dot{display:block;position:absolute}"]}),(l=4,s=t.Inject(i.DOCUMENT),function(e,t){s(e,t,l)})],e)}(),r=function(){function e(e,n,i){this.elementRef=e,this.animationBuilder=n,this.renderer=i,this.expandAnimationTiming="200ms ease",this.collapseAnimationTiming="100ms ease",this.animationDone=new t.EventEmitter,this._expanded=!1}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this.contentHeight=this.elementRef.nativeElement.scrollHeight;var t=this._expanded!==e;this._expanded=e,t?this.animate():this.setStyle},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.contentHeight=this.elementRef.nativeElement.scrollHeight,this.setStyle()},e.prototype.getCollapsedStyle=function(){return{height:"0px"}},e.prototype.getExpandedStyle=function(){return{height:this.contentHeight+"px"}},e.prototype.animate=function(){var e,t=this;this.expanded?((e=this.animationBuilder.build([n.style(this.getCollapsedStyle()),n.animate(this.expandAnimationTiming,n.style(this.getExpandedStyle()))]).create(this.elementRef.nativeElement)).onDone((function(){return t.animationDone.emit({toState:"expanded"})})),e.play()):(this.animationBuilder,(e=this.animationBuilder.build([n.style(this.getExpandedStyle()),n.animate(this.collapseAnimationTiming,n.style(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement)).onDone((function(){return t.animationDone.emit({toState:"collapsed"})})),e.play())},e.prototype.setStyle=function(){var e=this,t=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(t).forEach((function(n){e.renderer.setStyle(e.elementRef.nativeElement,n,t[n])}))},e.ctorParameters=function(){return[{type:t.ElementRef},{type:n.AnimationBuilder},{type:t.Renderer2}]},a([t.Input()],e.prototype,"expandAnimationTiming",void 0),a([t.Input()],e.prototype,"collapseAnimationTiming",void 0),e=a([t.Component({selector:"mgl-timeline-entry-content",template:"<div><ng-content></ng-content></div>",encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline-entry-content{position:relative;display:block;overflow:hidden}mgl-timeline-entry-content>div{padding:10px}"]})],e)}(),p=function(){function e(e){this.elementRef=e}return Object.defineProperty(e.prototype,"alternate",{set:function(e){this.elementRef.nativeElement.classList.toggle("alternate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{set:function(e){this.elementRef.nativeElement.classList.toggle("mobile",e)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:t.ElementRef}]},e=a([t.Component({selector:"mgl-timeline-entry-side",template:"<ng-content></ng-content>",encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline-entry-side{position:absolute;top:0;left:100%;width:100%;text-align:center}mgl-timeline-entry-side.alternate{left:-100%}mgl-timeline-entry-side.mobile{display:none}"]})],e)}(),c=function(){function e(e){this.elementRef=e,this.subscriptions=[],this.focusOnOpen=!1,this._mobile=!1,this.changed=new t.EventEmitter,this.animationDone=new t.EventEmitter}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.dot?this.dot.expanded&&this.content.expanded:this.content.expanded},set:function(e){this.dot&&e?this.dot.expanded=e:this.content.expanded=e,this.changed.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobile",{set:function(e){this.elementRef.nativeElement.classList.toggle("mobile",e),this.dot&&(this.dot.mobile=e),this.side&&(this.side.mobile=e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.dot&&this.subscriptions.push(this.dot.animationDone.subscribe((function(t){"expanded"===t.toState?e.content.expanded=!0:e.animationDone.emit(t)}))),this.content&&this.subscriptions.push(this.content.animationDone.subscribe((function(t){e.dot&&"collapsed"===t.toState?e.dot.expanded=!1:(e.focusOnOpen&&e.elementRef.nativeElement.scrollIntoView({behavior:"smooth"}),e.animationDone.emit(t))})))},Object.defineProperty(e.prototype,"alternate",{set:function(e){this.elementRef.nativeElement.classList.toggle("alternate",e),this.dot&&(this.dot.alternate=e),this.side&&(this.side.alternate=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.expand=function(){this.expanded=!0},e.prototype.toggle=function(e){var t=this.containsInPath(e,"mgl-timeline-entry-header"),n=this.containsInPath(e,"mgl-timeline-entry-dot");(t||n)&&(this.expanded=!this.expanded)},e.prototype.containsInPath=function(e,t){for(var n=e.target;n;){if(n.localName===t)return!0;n=n.parentElement}return!1},e.ctorParameters=function(){return[{type:t.ElementRef}]},a([t.HostBinding("class.expanded")],e.prototype,"expanded",null),a([t.Output("expand")],e.prototype,"changed",void 0),a([t.Output()],e.prototype,"animationDone",void 0),a([t.ContentChild(r)],e.prototype,"content",void 0),a([t.ContentChild(l)],e.prototype,"header",void 0),a([t.ContentChild(s)],e.prototype,"dot",void 0),a([t.ContentChild(p)],e.prototype,"side",void 0),e=a([t.Component({selector:"mgl-timeline-entry",template:'<ng-content select="mgl-timeline-entry-side"></ng-content>\n<div class="mgl-timeline-entry-card">\n  <div class="mgl-timeline-entry-card-header" (click)="toggle($event)">\n    <ng-content select="mgl-timeline-entry-dot"></ng-content>\n    <ng-content select="mgl-timeline-entry-header"></ng-content>\n  </div>\n  <ng-content select="mgl-timeline-entry-content"></ng-content>\n</div>',encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline-entry{display:block;position:relative;margin-bottom:50px;width:calc(50% - 5px)}mgl-timeline-entry.alternate{margin-left:calc(50% + 5px)}mgl-timeline-entry.mobile{width:calc(100% - 30px);margin-left:30px}mgl-timeline-entry .mgl-timeline-entry-card{background-color:#f0f0f0}mgl-timeline-entry .mgl-timeline-entry-card .mgl-timeline-entry-card-header{position:relative;background-color:#e6e6e6}"]})],e)}(),m=function(){function e(e,t){this.elementRef=e,this.changeDetectorRef=t,this.toggle=!0,this.mobileWidthThreshold=640,this.alternate=!0,this.side="left",this._focusOnOpen=!1,this.subscriptions=[]}return Object.defineProperty(e.prototype,"mobile",{get:function(){return this.elementRef.nativeElement.classList.contains("mobile")},set:function(e){this.content&&this.content.forEach((function(t){return t.mobile=e})),this.elementRef.nativeElement.classList.toggle("mobile",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusOnOpen",{get:function(){return this._focusOnOpen},set:function(e){this.content&&this.content.forEach((function(t){return t.focusOnOpen=e})),this._focusOnOpen=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.updateContent()},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.prototype.ngAfterViewInit=function(){var e=this;this.mobile=this.elementRef.nativeElement.clientWidth<this.mobileWidthThreshold,setTimeout((function(){return e.updateContent()})),this.content.changes.subscribe((function(t){e.updateContent()}))},e.prototype.updateContent=function(){var e=this;this.ngOnDestroy(),this.content&&this.content.forEach((function(t,n){e.toggle&&e.subscriptions.push(t.changed.subscribe((function(n){!0===n&&e.content.filter((function(e){return e!==t})).forEach((function(e){return e.collapse()}))}))),t.alternate=e.alternate?n%2!=0:"right"===e.side,t.mobile=e.mobile,t.focusOnOpen=e.focusOnOpen}))},e.prototype.onResize=function(e){this.mobile=this.elementRef.nativeElement.clientWidth<this.mobileWidthThreshold},e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ChangeDetectorRef}]},a([t.Input()],e.prototype,"toggle",void 0),a([t.Input()],e.prototype,"mobileWidthThreshold",void 0),a([t.Input()],e.prototype,"alternate",void 0),a([t.Input()],e.prototype,"side",void 0),a([t.Input()],e.prototype,"focusOnOpen",null),a([t.ContentChildren(c)],e.prototype,"content",void 0),a([t.HostListener("window:resize",["$event"])],e.prototype,"onResize",null),e=a([t.Component({selector:"mgl-timeline",template:'<div class="mgl-timeline-line"></div>\n<ng-content></ng-content>',encapsulation:t.ViewEncapsulation.None,styles:["mgl-timeline{position:relative;display:block;padding:50px 0}mgl-timeline .mgl-timeline-line{position:absolute;top:0;height:100%;background-color:#a0a0a0;left:50%;width:10px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}mgl-timeline.mobile .mgl-timeline-line{left:20px;-webkit-transform:none;transform:none}"]})],e)}(),d=function(){function e(){}return e=a([t.NgModule({declarations:[m,c,l,p,r,s],exports:[m,c,l,p,r,s]})],e)}();e.MglTimelineModule=d,e.ɵa=m,e.ɵb=c,e.ɵc=r,e.ɵd=l,e.ɵe=s,e.ɵf=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-mgl-timeline.umd.min.js.map